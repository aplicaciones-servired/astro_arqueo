---
import HeaderLink from "./HeaderLink.astro";
import "../../styles/global.css";
import LogoutButton from "../ui/LogoutButton";
import EmpresaSelector from "../ui/EmpresaSelector";
import { SignedIn, SignedOut } from "@clerk/astro/react";

// Estado del menú (Astro island con cliente)
let isOpen = false;
---

<header class="bg-blue-200 text-black rounded-2xl shadow-md">
  <div class="container mx-auto flex items-center justify-between px-5 py-4">
    
    <SignedIn>
      <!-- Selector de Empresa (solo para usuarios logueados) -->
      <div class="flex items-center space-x-4">
        <div class="w-44">
          <EmpresaSelector client:load />
        </div>
      </div>
    </SignedIn>
    
    <SignedOut>
      <!-- Logo o título para usuarios no logueados -->
      <div class="text-xl font-bold">Mi App</div>
    </SignedOut>

    <!-- Botón hamburguesa (solo visible en móviles) -->
    <button
      type="button"
      class="md:hidden p-2 rounded-lg hover:bg-blue-300 focus:outline-none"
      aria-label="Abrir menú"
      id="menu-toggle"
    >
      <svg
        class="w-6 h-6"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M4 6h16M4 12h16M4 18h16"></path>
      </svg>
    </button>

    <!-- Links (desktop) - Solo para usuarios logueados -->
    <SignedIn>
      <ul
        id="menu"
        class="hidden md:flex items-center space-x-8 font-semibold font-heading"
      >
        <HeaderLink
          href="/getarqueo"
          class={"transition duration-150 ease-in-out hover:scale-105"}
          >Home</HeaderLink
        >
        <HeaderLink
          href="/cronograma"
          class={"transition duration-150 ease-in-out hover:scale-105"}
          >Insertar Cronograma</HeaderLink
        >
        <HeaderLink
          href="/getcronograma"
          class={"transition duration-150 ease-in-out hover:scale-105"}
          >Ver Cronograma</HeaderLink
        >
        <HeaderLink
          href="/getregistro"
          class={"transition duration-150 ease-in-out hover:scale-105"}
          >Registro</HeaderLink
        >
      </ul>
    </SignedIn>

    <!-- Botón Logout - Solo para usuarios logueados -->
    <SignedIn>
      <div class="hidden md:flex">
        <LogoutButton client:load />
      </div>
    </SignedIn>
  </div>
</header>